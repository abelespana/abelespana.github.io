<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Random Qatar '22</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
      crossorigin="anonymous"
    />
    <style>
      h2.title {
        margin-top: 30px;
        margin-bottom: 15px;
      }
      h5 {
        margin-bottom: 15px;
      }
      p {
        font-size: 25px;
        margin-bottom: 35px;
      }
      .label {
        width: 90%;
        margin-left: 5%;
        background-color: rgba(13, 110, 253, 0.8);
        padding: 2px;
        color: white;
      }
    </style>
  </head>
  <body>
    <div class="container text-center">
      <h2 class="title">Generador de apuestas del mundial 2‚öΩÔ∏è22</h2>
      <h5 class="label"><b>üÜö Final:</b></h5>
      <p id="finale">-</p>
      <h5 class="label"><b>üèÜ Campe√≥n:</b></h5>
      <p id="winner">-</p>
      <h5 class="label"><b>‚¨áÔ∏è Decepci√≥n:</b></h5>
      <p id="loser">-</p>
    </div>

    <div class="text-center mt-5">
      <button
        id="generate-btn"
        type="button"
        class="btn btn-primary"
        onclick="getPrediction()"
      >
        Generar apuesta
      </button>
      <button
        id="share-btn"
        type="button"
        class="btn btn-primary"
        onclick="share()"
        disabled
      >
        Compartir
      </button>
      
    </div>
  </body>
  <script>
    const finaleField = document.getElementById("finale");
    const winnerField = document.getElementById("winner");
    const loserField = document.getElementById("loser");

    const generateButton = document.getElementById("generate-btn");
    const shareButton = document.getElementById("share-btn");
    
    let textToShare = null;

    const TEAMS = [
      "üá©üá™ Alemania",
      "üá∏üá¶ Arabia Saud√≠",
      "üá¶üá∑ Argentina",
      "üá¶üá∫ Australia",
      "üáßüá™ B√©lgica",
      "üáßüá∑ Brasil",
      "üá®üá≤ Camer√∫n",
      "üá®üá¶ Canad√°",
      "üá∂üá¶ Catar",
      "üá∞üá∑ Corea del Sur",
      "üá®üá∑ Costa Rica",
      "üá≠üá∑ Croacia",
      "üá©üá∞ Dinamarca",
      "üá™üá® Ecuador",
      "üá™üá∏ Espa√±a",
      "üá∫üá∏ Estados Unidos",
      "üá´üá∑ Francia",
      "üè¥Û†ÅßÛ†Å¢Û†Å∑Û†Å¨Û†Å≥Û†Åø Gales",
      "üá¨üá≠ Ghana",
      "üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø Inglaterra",
      "üáÆüá∑ Ir√°n",
      "üáØüáµ Jap√≥n",
      "üá≤üá¶ Marruecos",
      "üá≤üáΩ M√©xico",
      "üá≥üá± Pa√≠ses Bajos",
      "üáµüá± Polonia",
      "üáµüáπ Portugal",
      "üá∏üá≥ Senegal",
      "üá∑üá∏ Serbia",
      "üá®üá≠ Suiza",
      "üáπüá≥ T√∫nez",
      "üá∫üáæ Uruguay",
    ];
    
    const TOP_TEAMS = [
      "üá©üá™ Alemania",
      "üá¶üá∑ Argentina",
      "üáßüá∑ Brasil",
      "üá™üá∏ Espa√±a",
      "üá∫üá∏ Estados Unidos",
      "üá´üá∑ Francia",
      "üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø Inglaterra",
      "üá≤üáΩ M√©xico",
      "üá≥üá± Pa√≠ses Bajos",
      "üáµüáπ Portugal",
    ];

    const getPrediction = () => {
      getResults();
      generateButton.textContent = "Generar otra";
      shareButton.disabled = false;
    };
    
    const getResults = () => {
      const finalists = getFinale();
      const winner = getWinner(finalists);
      const loser = getLoser(finalists);
      
      printResults(finalists, winner, loser);
      
      const [finalist1, finalist2] = finalists;
      
      textToShare = `‚öΩÔ∏è Esta es mi porra para el Mundial de Catar:
Final: ${finalist1} - ${finalist2};
Campe√≥n: ${winner}
Decepci√≥n: ${loser}

Haz la tuya en:
https://abelespana.github.io`
      
      if (winner === "üá™üá∏ Espa√±a") {
        generateButton.disabled = true;
      }
    }

    const getFinale = () => {
      const team1 = getRandomTeam();
      let team2 = getRandomTeam();

      while (team1 === team2) {
        team2 = getRandomTeam();
      }

      return [team1, team2];
    };

    getWinner = (finalists) => {
      return finalists[Math.floor(Math.random() * finalists.length)];
    };

    getLoser = (finalists) => {
      const loserCandidates = TOP_TEAMS.filter((team) => !finalists.includes(team));
      return loserCandidates[Math.floor(Math.random() * loserCandidates.length)];
    };

    const getRandomTeam = () => {
      return TEAMS[Math.floor(Math.random() * TEAMS.length)];
    };
    
    const printResults = (finalists, winner, loser) => {
      finaleField.textContent = `${finalists[0]} - ${finalists[1]}`;
      winnerField.textContent = `${winner}`;
      loserField.textContent = `${loser}`;
    }
    
    const share = () => {
      if (navigator.share) {
        navigator.share({
          title: 'Porra mundial 2022',
          text: textToShare,
        });
      }
    }
  </script>
</html>
