<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Random Qatar '22</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
      crossorigin="anonymous"
    />
    <style>
      h2.title {
        margin-top: 30px;
        margin-bottom: 15px;
      }
      h5 {
        margin-bottom: 15px;
      }
      p {
        font-size: 25px;
        margin-bottom: 35px;
      }
      .label {
        width: 90%;
        margin-left: 5%;
        background-color: rgba(13, 110, 253, 0.8);
        padding: 2px;
        color: white;
      }
    </style>
  </head>
  <body>
    <div class="container text-center">
      <h2 class="title">Generador de apuestas del mundial 2⚽️22</h2>
      <h5 class="label"><b>🆚 Final:</b></h5>
      <p id="finale">-</p>
      <h5 class="label"><b>🏆 Campeón:</b></h5>
      <p id="winner">-</p>
      <h5 class="label"><b>⬇️ Debacle:</b></h5>
      <p id="loser">-</p>
    </div>

    <div class="text-center mt-5">
      <button
        id="button"
        type="button"
        class="btn btn-primary"
        onclick="getPrediction()"
      >
        Generar apuesta
      </button>
    </div>
  </body>
  <script>
    const finaleField = document.getElementById("finale");
    const winnerField = document.getElementById("winner");
    const loserField = document.getElementById("loser");

    const button = document.getElementById("button");

    const teams = [
      "🇩🇪 Alemania",
      "🇸🇦 Arabia Saudí",
      "🇦🇷 Argentina",
      "🇦🇺 Australia",
      "🇧🇪 Bélgica",
      "🇧🇷 Brasil",
      "🇨🇲 Camerún",
      "🇨🇦 Canadá",
      "🇶🇦 Catar",
      "🇰🇷 Corea del Sur",
      "🇨🇷 Costa Rica",
      "🇭🇷 Croacia",
      "🇩🇰 Dinamarca",
      "🇪🇨 Ecuador",
      "🇪🇸 España",
      "🇺🇸 Estados Unidos",
      "🇫🇷 Francia",
      "🏴󠁧󠁢󠁷󠁬󠁳󠁿 Gales",
      "🇬🇭 Ghana",
      "🏴󠁧󠁢󠁥󠁮󠁧󠁿 Inglaterra",
      "🇮🇷 Irán",
      "🇯🇵 Japón",
      "🇲🇦 Marruecos",
      "🇲🇽 México",
      "🇳🇱 Países Bajos",
      "🇵🇱 Polonia",
      "🇵🇹 Portugal",
      "🇸🇳 Senegal",
      "🇷🇸 Serbia",
      "🇨🇭 Suiza",
      "🇹🇳 Túnez",
      "🇺🇾 Uruguay",
    ];

    const getPrediction = () => {
      getResults();
      button.textContent = "Generar otra";
    };

    const getResults = () => {
      const team1 = getTeam();
      let team2 = getTeam();

      while (team1 === team2) {
        // alert("¡mismo equipo!");
        team2 = getTeam();
      }

      finaleField.textContent = `${team1} - ${team2}`;

      const finalists = [team1, team2];

      getWinner(finalists);
      getLoser(finalists);
    };

    getWinner = (finalists) => {
      const winner = finalists[Math.floor(Math.random() * finalists.length)];
      winnerField.textContent = `${winner}`;

      if (winner === "🇪🇸 España") {
        button.disabled = true;
      }
    };

    getLoser = (finalists) => {
      const loserCandidates = teams.filter((team) => !finalists.includes(team));
      const loser =
        loserCandidates[Math.floor(Math.random() * loserCandidates.length)];

      loserField.textContent = `${loser}`;
    };

    const getTeam = () => {
      return teams[Math.floor(Math.random() * teams.length)];
    };
  </script>
</html>
